<div *ngIf="!edit">
  <h1 class="header" style="margin-left: 20px; margin-top: 20px">
    Lista de Camiões
    <img style="width: 20px"
      src="https://flaticons.net/icon.php?slug_category=mobile-application&slug_icon=command-refresh"
      (click)="listarCamioes()" />
  </h1>

  <hr />
  <table mat-table [dataSource]="camioes" class="mat-elevation-z8">

    <ng-container matColumnDef="matricula">
      <th mat-header-cell *matHeaderCellDef>Matrícula</th>
      <td mat-cell *matCellDef="let camiao">{{camiao.matricula}}</td>
    </ng-container>

    <ng-container matColumnDef="opcoes">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let camiao">
        <button mat-icon-button (click)="listarCamiao(camiao.matricula)" class="form-button" async
          style="transform: scale(0.75)" [disabled]="!camiao.ativo">
          Editar
        </button>
        <button mat-icon-button (click)="inibirCamiao(camiao.matricula)" class="form-button" async
          style="transform: scale(0.75)" [hidden]="camiao.ativo">
          Desinibir
        </button>
        <button mat-icon-button (click)="inibirCamiao(camiao.matricula)" class="form-button" async
          style="transform: scale(0.75)" [hidden]="!camiao.ativo">
          Inibir
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row;columns:displayedColumns;"></tr>
  </table>

  <mat-paginator class="paginas" #paginator [pageSize]="10" [pageSizeOptions]="[2, 5, 10]" aria-label="Select page"
    color="warn" showFirstLastButtons>

  </mat-paginator>

</div>
<div *ngIf="edit">
  <div class="form-div">
    <form [formGroup]="camiaoForm" [hidden]="success" [hidden]="error" (ngSubmit)="submit()">
      <h1 class="header">Editar Camião</h1>
      <hr>
      <div class="example-form">
        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Nome*</label>
          <input matInput formControlName="nome" name="nome" class="form-text-box" required>
        </mat-form-field>
        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Matrícula*</label>
          <input matInput formControlName="matricula" name="matricula" class="form-text-box" required minlength="8"
            maxlength="8"
            pattern="^(([0-9]{2}-){2}[A-Z]{2})|([A-Z]{2}(-[0-9]{2}){2})|([A-Z]{2}-[0-9]{2}-[A-Z]{2})|([0-9]{2}-[A-Z]{2}-[0-9]{2})$">

          <div *ngIf="matricula?.errors?.['minlength']">
            Este campo tem que ter exatamente 8 caracteres
          </div>

          <div *ngIf="matricula?.errors?.['pattern']">
            Este campo tem que estar no formato XX-XX-XX e tem que ter 2 letras e 4 números
          </div>
        </mat-form-field>
      </div>
      <div class="example-form">
        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Tara*</label>
          <input matInput formControlName="tara" name="tara" class="form-text-box" required>
        </mat-form-field>
        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Capacidade de Carga*</label>
          <input matInput formControlName="capacidadeCarga" name="capacidadeCarga" class="form-text-box" required>
        </mat-form-field>
      </div>
      <div class="example-form">
        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Carga Total da Bateria*</label>
          <input matInput formControlName="cargaTotalBat" name="cargaTotalBat" class="form-text-box" required>
        </mat-form-field>

        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Autonomia da Carga Máxima*</label>
          <input matInput formControlName="autonomiaCargaMax" name="autonomiaCargaMax" class="form-text-box" required>
        </mat-form-field>

        <mat-form-field [hideRequiredMarker]="true" class="full">
          <label class="form-label">Tempo de Carregamento*</label>
          <input matInput formControlName="tempoCarregamento" name="tempoCarregamento" class="form-text-box" required>
        </mat-form-field>

      </div>

      <p style="margin-left: 20px">Campos de preenchimento obrigatório(*)</p>
      <button [disabled]="camiaoForm.invalid" class="form-button">
        Editar
      </button>
      <button mat-icon-button (click)="back()" class="form-button">Voltar</button>

    </form>

    <div *ngIf="success && !error" class="success">
      Foi editado o camião {{ camiao.nome }} {{ camiao.matricula }}
      {{ camiao.tara }} {{ camiao.capacidadeCarga }} {{ camiao.cargaTotalBat }}
      {{ camiao.autonomiaCargaMax }}
      {{ camiao.tempoCarregamento }}
    </div>

    <div *ngIf="error" class="error">Erro na edição do camião</div>
  </div>
</div>